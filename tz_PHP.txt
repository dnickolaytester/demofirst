Тестовое задание (в2)

Цель: обеспечить мониторинг стороннего (внешнего) сервиса

Задача: создать простое web-приложение, для мониторинга внешнего сервиса, посредством отправки тестового запроса и сравнения его с эталоном ответа.

Требования к реализации: нативный PHP, БД на свой выбор, ограничения по клиентской части (js и проч) — нет, приветствуется использование паттернов ООП.

Описание
	Необходимо реализовать web-приложение, которое по крону будет выполнять тестовый запрос к wsdl сервису, сравнивать его ответ с эталоном и сохранять результат сравнения, временем реакции (время выполнения запроса) и вердиктом (OK|FAIL) в базу.

	Кроме того, необходимо сохранять тело ответа сервиса (и по желанию, хедеры) в случае, если сравнение выдало FAIL. Желательно ограничить размер сохраняемых данных, во избежание переполнения базы (15 КБ на ответ, 3 КБ на хедеры).

	Web-приложение должно обеспечивать удобный просмотр результатов тестов в популярных браузерах, с возможностью фильтровать данные по дате. Если дата не задана — показываем результаты за сегодня.
	При выборе одного из результатов, система должна показать всю имеющуюся информацию о выбранном запросе:
	- дата/время выполнения запроса
	- дата/время получения ответа
	- время ожидания [ формат: «% c (% мс)]
	- результат сравнения (ок/fail)
	-для запросов со статусом fail – тело ответа (+ хедеры по желанию)

Примерный компоновка страницы результатов представлена ниже:




Тестовые данные:
адрес системы: http://82.138.16.126:8888/TaxiPublic/Service.svc?wsdl
тестовый запрос: <taxi:RegNum>ем33377</taxi:RegNum>

Эталонный ответ ("сырой"):

<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <GetTaxiInfosResponse xmlns="http://dtis.mos.ru/taxi">
         <GetTaxiInfosResult>
            <TaxiInfo>
               <LicenseNum>02651</LicenseNum>
               <LicenseDate>08.08.2011 0:00:00</LicenseDate>
               <Name>ООО "НЖТ-ВОСТОК"</Name>
               <OgrnNum>1107746402246</OgrnNum>
               <OgrnDate>17.05.2010 0:00:00</OgrnDate>
               <Brand>FORD</Brand>
               <Model>FOCUS</Model>
               <RegNum>ЕМ33377</RegNum>
               <Year>2011</Year>
               <BlankNum>002695</BlankNum>
               <Info/>
            </TaxiInfo>
         </GetTaxiInfosResult>
      </GetTaxiInfosResponse>
   </s:Body>
</s:Envelope>

Примечание: для упрощения задачи, в сравнении ответа — особо не огрничиваем, главное что бы указанные данные присутствовали и совпадали с указанными выше.


